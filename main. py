import os
import random
import time

GROUND_LEVEL = 18  # Высота земли
DINO_HEIGHT = 5     # Высота динозаврика
CACTUS_HEIGHT = 6   # Высота кактуса
SCORE_STEP = 1      # Шаг увеличения очков
FPS = 10            # Частота кадров в секунду

class GameObject:
    def init(self):
        self.x = 0
        self.y = 0
    
    def draw(self, screen):
        pass

class Dino(GameObject):
    def init(self):
        super().init()
        self.is_jumping = False
        self.jump_count = 0
        self.x = 10
        self.y = GROUND_LEVEL - DINO_HEIGHT
        
    def jump(self):
        if not self.is_jumping and self.y >= GROUND_LEVEL - DINO_HEIGHT:
            self.is_jumping = True
            
    def update(self):
        if self.is_jumping:
            if self.jump_count <= FPS // 2:
                self.y -= 1
            else:
                self.y += 1
                
            self.jump_count += 1
            
            if self.jump_count > FPS:
                self.is_jumping = False
                self.jump_count = 0
                self.y = GROUND_LEVEL - DINO_HEIGHT
                
    def draw(self, screen):
        for i in range(DINO_HEIGHT):
            row = list(screen[self.y + i])
            row[self.x:self.x+2] = ['O', '|']
            screen[self.y + i] = ''.join(row)

class Cactus(GameObject):
    def init(self):
        super().init()
        self.x = 40
        self.y = GROUND_LEVEL - CACTUS_HEIGHT
        
    def move_left(self):
        self.x -= 1
        
    def is_off_screen(self):
        return self.x < 0
        
    def draw(self, screen):
        for i in range(CACTUS_HEIGHT):
            row = list(screen[self.y + i])
            row[self.x:self.x+2] = ['(', ')']
            screen[self.y + i] = ''.join(row)

def main():
    width = 50
    height = 20
    score = 0
    game_over = False
    dino = Dino()
    obstacles = []
    last_obstacle_time = 0
    
    while not game_over:
        screen = [[' ']*width for _ in range(height)]
        
        # Обновляем препятствия каждые две секунды
        current_time = int(time.time())
        if current_time % 2 == 0 and current_time != last_obstacle_time:
            obstacles.append(Cactus())
            last_obstacle_time = current_time
            
        # Удаляем вышедшие за экран объекты
        obstacles[:] = [o for o in obstacles if not o.is_off_screen()]
        
        # Обновление объектов
        dino.update()
        for obstacle in obstacles:
            obstacle.move_left()
        
        # Проверка столкновений
        collision = any(dino.x == obstacle.x and dino.y <= obstacle.y + CACTUS_HEIGHT for obstacle in obstacles)
        if collision:
            game_over = True
        
        # Рисуем объекты
        dino.draw(screen)
        for obstacle in obstacles:
            obstacle.draw(screen)
        
        # Добавляем землю
        for x in range(width):
            screen[GROUND_LEVEL][x] = '='
        
        # Отображаем счёт
        print(f'{" ".join(["Score:", str(score)])}')
        
        # Очистка экрана перед выводом нового кадра
        os.system('cls' if os.name == 'nt' else 'clear')
        
        # Печать экрана
        for line in screen:
            print(''.join(line))
        
        # Ждём немного, чтобы замедлить анимацию
        time.sleep(1/FPS)
        
        # Обработка ввода игрока
        key = input("Press space to jump: ")
        if key.strip() == '' or key.lower() == 'space':
            dino.jump()
        
        # Увеличение счёта
        score += SCORE_STEP
    
    print("\nGame Over!")
    print(f"Final Score: {score}")

if name == "main":
    main()
